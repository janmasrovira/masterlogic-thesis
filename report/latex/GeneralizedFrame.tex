\begin{spverbatim}
module GeneralizedFrame where

open import Agda.Builtin.Nat using (Nat; suc; _+_)
open import Agda.Primitive using (Level; lzero; lsuc; _âŠ”_)
open import Data.Empty using (âŠ¥; âŠ¥-elim)
open import Data.List using (List)
open import Data.List.Relation.Unary.All using (All)
open import Data.Product
open import Data.Sum using (_âŠ_; injâ‚; injâ‚‚)
open import Relation.Nullary using (yes; no; Â¬_)
open import Function using (_âˆ˜_; case_of_; _$_)
open import Relation.Binary using (REL; Rel; Transitive; Reflexive) renaming (Decidable to Decidableâ‚‚)
open import Relation.Binary.PropositionalEquality using (_â‰¡_; _â‰¢_; refl; subst; cong)
open import Relation.Nullary using (Â¬_)
open import Relation.Unary using (Pred; _âˆˆ_; _âˆ‰_; Decidable; ï½›_ï½; _âˆ©_; _âŠ†_; Satisfiable)

open import Formula using (Fm; Var; _â†_; âŠ¥'; _â–·_; var; Â¬'_)
open import Base

private
  variable
    â„“W â„“R â„“S : Level

â‹ƒ[_] : âˆ€ {â„“ â„“' â„“''} {B : Set â„“'} â†’ (A : Set â„“) â†’ (A â†’ Pred B â„“'') â†’ Pred B _
â‹ƒ[ yâˆˆY ] yâ†’Y z = âˆƒ[ yâˆˆY ] (z âˆˆ (yâ†’Y yâˆˆY))

module Trans-conditions (W : Set â„“W) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) where
  private
    ğ• = Pred W â„“W

  Trans-1 Trans-2 Trans-3 Trans-4 Trans-5 Trans-6 Trans-7 Trans-8 Trans-L
    : Set (lsuc â„“W âŠ” â„“S)

  Trans-1 = âˆ€ {u x Y} â†’ S x u Y â†’ (yâ†’Y : âˆ€ {y} â†’ y âˆˆ Y â†’ ğ•)
    â†’ (irrel : âˆ€ {y} {yâˆˆY yâˆˆ'Y : y âˆˆ Y} â†’ yâ†’Y yâˆˆY â‰¡ yâ†’Y yâˆˆ'Y)
    â†’ (âˆ€ {y} (yâˆˆY : y âˆˆ Y) â†’ S x y (yâ†’Y yâˆˆY))
    â†’ âˆƒ[ Z ] (Z âŠ† â‹ƒ[ Î£ W (_âˆˆ Y) ] (yâ†’Y âˆ˜ projâ‚‚) Ã— S x u Z)
  Trans-2 = âˆ€ {u x Y} â†’ S x u Y â†’ (yâ†’Y : âˆ€ {y} â†’ y âˆˆ Y â†’ ğ•)
    â†’ (irrel : âˆ€ {y} {yâˆˆY yâˆˆ'Y : y âˆˆ Y} â†’ yâ†’Y yâˆˆY â‰¡ yâ†’Y yâˆˆ'Y)
    â†’ (âˆ€ {y} (yâˆˆY : y âˆˆ Y) â†’ S x y (yâ†’Y yâˆˆY))
    â†’ S x u (â‹ƒ[ Î£ W (_âˆˆ Y) ] (yâ†’Y âˆ˜ projâ‚‚))
  Trans-3 = âˆ€ {x u Y} â†’ S x u Y â†’ âˆƒ[ y ] (Î£[ yâˆˆY âˆˆ (y âˆˆ Y) ] (âˆ€ {Y'} â†’ S x y Y' â†’ âˆƒ[ Y'' ]
    (Y'' âŠ† Y' Ã— S x u Y'')))
  Trans-4 = âˆ€ {x u Y} â†’ S x u Y â†’ âˆƒ[ y ] (y âˆˆ Y Ã— (âˆ€ {Y'} â†’ S x y Y' â†’ S x u Y'))
  Trans-5 = âˆ€ {u x y Y Y'} â†’ S x u Y â†’ y âˆˆ Y â†’ S x y Y' â†’ âˆƒ[ Y'' ] (Y'' âŠ† Y' Ã— S x u Y'')
  Trans-6 = âˆ€ {u x y Y Y'} â†’ S x u Y â†’ y âˆˆ Y â†’ S x y Y' â†’ S x u Y'
  Trans-7 = âˆ€ {u x y Y Y'} â†’ S x u Y â†’ y âˆˆ Y â†’ S x y Y' â†’ y âˆ‰ Y'
    â†’ âˆƒ[ Y'' ] (Y'' âŠ† Y' Ã— S x u Y'')
  Trans-8 = âˆ€ {u x y Y Y'} â†’ S x u Y â†’ y âˆˆ Y â†’ S x y Y' â†’ y âˆ‰ Y' â†’ S x u Y'
  Trans-L1 = âˆ€ {w u V} â†’ S w u V â†’ (f : âˆ€ {v} â†’ v âˆˆ V â†’ âˆƒ[ Z ] (S w v Z))
      â†’ âˆƒ[ Z ] (Z âŠ† (Î» { x â†’ âˆƒ[ v ] (Î£[ vâˆˆV âˆˆ (v âˆˆ V) ] (x âˆˆ projâ‚ (f vâˆˆV)))}) Ã— S w u Z)
  Trans-L = âˆ€ {w u V} â†’ S w u V â†’ (f : âˆ€ {v} â†’ v âˆˆ V â†’ âˆƒ[ Z ] (S w v Z))
      â†’ S w u Î» {x â†’ âˆƒ[ v ] (Î£[ vâˆˆV âˆˆ (v âˆˆ V) ] (x âˆˆ projâ‚ (f vâˆˆV)))}

record FrameNoTrans (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S)
  : Set (lsuc lzero âŠ” â„“R âŠ” â„“S âŠ” lsuc â„“W) where
  constructor frame
  ğ• : Set _
  ğ• = Pred W â„“W
  field
    witness : W
    Swu-sat : âˆ€ {w u Y} â†’ S w u Y â†’ Satisfiable Y
    R-trans : Transitive R
    R-noetherian : Noetherian R
    SwâŠ†Rw : âˆ€ {w u Y} â†’ S w u Y â†’ R w u
    SwuYâŠ†Rw : âˆ€ {w u Y} â†’ S w u Y â†’ âˆ€ {y} â†’ y âˆˆ Y â†’ R w y
    S-quasirefl : âˆ€ {w u} â†’ R w u â†’ S w u ï½› u ï½
    R-Sw-trans : âˆ€ {w u v} â†’ R w u â†’ R u v â†’ S w u ï½› v ï½
    S-ext : âˆ€ {w x V V'} â†’ S w x V â†’ V âŠ† V' â†’ V' âŠ† V â†’ S w x V'

  IsChoiceSet : ğ• â†’ (w x : W) â†’ Set (lsuc â„“W âŠ” â„“R âŠ” â„“S)
  IsChoiceSet Î“ w x = R w x Ã— âˆ€ {Y} â†’ S w x Y â†’ Satisfiable (Y âˆ© Î“)

  ChoiceSet : (w x : W) â†’ Set (lsuc â„“W âŠ” â„“R âŠ” â„“S)
  ChoiceSet w x = Î£ ğ• Î» Î“ â†’ IsChoiceSet Î“ w x

record Frame (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S)
  (T : (W : Set â„“W) â†’ RELâ‚ƒ W W (Pred W â„“W) â„“S â†’ Set (lsuc â„“W âŠ” â„“S))
  : Set (lsuc â„“W âŠ” â„“R âŠ” â„“S) where
  constructor frame
  field
    frame-0 : FrameNoTrans {â„“W} {â„“R} {â„“S} W R S
    quasitrans : T W S
  open FrameNoTrans frame-0 public

FrameL : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
FrameL W R S = Frame W R S (Trans-conditions.Trans-L)

Frame1 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame1 W R S = Frame W R S (Trans-conditions.Trans-1)

Frame2 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame2 W R S = Frame W R S (Trans-conditions.Trans-2)

Frame3 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame3 W R S = Frame W R S (Trans-conditions.Trans-3)

Frame4 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame4 W R S = Frame W R S (Trans-conditions.Trans-4)

Frame5 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame5 W R S = Frame W R S (Trans-conditions.Trans-5)

Frame6 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame6 W R S = Frame W R S (Trans-conditions.Trans-6)

Frame7 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame7 W R S = Frame W R S (Trans-conditions.Trans-7)

Frame8 : (W : Set â„“W) (R : Rel W â„“R) (S : RELâ‚ƒ W W (Pred W â„“W) â„“S) â†’ Set _
Frame8 W R S = Frame W R S (Trans-conditions.Trans-8)

module FrameL
  {W R S}
  (F : FrameL {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame1
  {W R S}
  (F : Frame1 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame2
  {W R S}
  (F : Frame2 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame3
  {W R S}
  (F : Frame3 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame4
  {W R S}
  (F : Frame4 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame5
  {W R S}
  (F : Frame5 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame6
  {W R S}
  (F : Frame6 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame7
  {W R S}
  (F : Frame7 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Frame8
  {W R S}
  (F : Frame8 {â„“W} {â„“R} {â„“S} W R S) where
  open Frame F public

module Predicates
  {W R S}
  (F : FrameL {lzero} {lzero} {lzero} W R S)
  where
  open FrameL F

  R[_] : ğ• â†’ ğ•
  R[ V ] x = âˆƒ[ v ] (v âˆˆ V Ã— R v x)

  Râ»Â¹[_] : ğ• â†’ ğ•
  Râ»Â¹[ E ] x = âˆƒ[ e ] (e âˆˆ E Ã— R x e)

  Râ»Â¹_[_] : W â†’ ğ• â†’ ğ•
  Râ»Â¹ x [ V ] = Râ»Â¹[ V ] âˆ© R x
\end{spverbatim}
