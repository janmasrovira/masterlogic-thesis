#+latex_compiler: xelatex
#+latex_class: article
#+title: Interpretability logics
#+author: Jan Mas Rovira
#+subtitle: Master's thesis

#+latex_header: \usepackage{unicode-math}
#+latex_header: \usepackage{fontspec}
#+latex_header: \usepackage[x11names, table]{xcolor}
#+latex_header: \usepackage[margin=2.5cm]{geometry}
#+latex_header: \usepackage{lmodern}
#+latex_header: \setmonofont{FreeMono}
#+latex_header: \usepackage{cancel}
#+latex_header: \usepackage{amsthm}

#+latex_header: \hypersetup{colorlinks=true,urlcolor=DodgerBlue4,linkcolor=Firebrick4,citecolor=Green4}
#+latex_header: \newcommand{\ie}[0]{i.e.\ }
#+latex_header: \newcommand{\todo}[0]{\textcolor{red}{pending}}
#+latex_header: \newcommand{\pend}[0]{\textcolor{Tomato3}{pending }}
#+latex_header: \newcommand{\ok}[0]{\textcolor{DeepSkyBlue4}{solved }}
#+macro: red @@latex:{\color{red}@@$1@@latex:}@@

#+macro: begindef @@latex:\begin{definition}@@
#+macro: enddef @@latex:\end{definition}@@

#+macro: begincoro @@latex:\begin{corollary}@@
#+macro: endcoro @@latex:\end{corollary}@@

#+macro: begintheorem @@latex:\begin{theorem}@@
#+macro: endtheorem @@latex:\end{theorem}@@

#+macro: beginproof @@latex:\begin{proof}@@
#+macro: endproof @@latex:\end{proof}@@


#+latex_header: \newtheorem{theorem}{Theorem}
#+latex_header: \theoremstyle{definition}
#+latex_header: \newtheorem{corollary}[theorem]{Corollary}
#+latex_header: \theoremstyle{definition}
#+latex_header: \newtheorem{definition}[theorem]{Definition}
#+latex_header: \graphicspath{{img/}}

* Language
  The language of interpretability logics is $‚ü®‚ä•,‚Üí,‚ñ∑‚ü©$. We define $‚àß,‚ñ°,‚ô¢,‚à®$.

* Notation
  Is this intuitive enough that is not even worth mentioning?
  - $wRuRv$ iff $wRu$ and $uRv$.
  - $wRuS_xv$ iff $wRu$ and $uS_xv$.
  - $wRu‚ä©A$ iff $wRu$ and $u‚ä©A$.
  - $Y‚ä©A$ iff for all $y‚ààY$ we have $y‚ä©A$.
  - $xS_wY‚ä©A$ iff $xS_wY$ and $Y‚ä©A$.
* Semantics
  In this document we consider two variants of relational semantics for
  interpretability logic similar to Kripke semantics for modal logic.

** Ordinary Veltman semantics
   {{{begindef}}} An ordinary Veltman frame $F=‚ü®W,R,S‚ü©$ is a structure
   constituted by a set of worlds $W$, a binary relation $R‚äÜW¬≤$ and a ternary
   relation $S‚äÜW√óW√óW$. We write $wRu$ in place of $‚ü®w,u‚ü©‚ààR$ and
   $uS_wv$ in place of $‚ü®w,u,v‚ü©‚ààS$. The structure must satisfy the following
   conditions:

   1. $R$ is a transitive.
   2. $R$ is conversely well-founded. That is, there is no infinite ascending
      chain $w‚ÇÅRw‚ÇÇR‚Ä¶$.
   3. If $uS_wv$ then $wRu$ and $wRv$.
   4. If $wRu$ then $uS_wu$.
   5. For every $w$, $S_w$ is transitive.
   6. If $wRu$ and $uRv$ then $uS_wv$.
   {{{enddef}}}


   {{{begindef}}} An ordinary Veltman model $M=‚ü®F,V‚ü©$ is a structure constituted
   by an ordinary Veltman frame $F$ and a valuation $V‚äÜW√óVar$.

   Given a model $M$, we define a forcing relation $‚ä©_M‚äÜW √ó Fm$. We write
   $M,w‚ä©A$ in place of $‚ü®w,A‚ü©‚àà‚ä©_M$ or simply $w‚ä©A$ when the model is clear by
   the context. We write $w‚äÆA$ when $‚ü®w,A‚ü©‚àâ‚ä©_M$.
   - $w‚äÆ‚ä•$.
   - If $x‚ààVar$, then $w‚ä©x$ iff $‚ü®w,x‚ü©‚ààV$.
   - If $A,B‚ààFm$, then $w‚ä©A‚ÜíB$ iff if $w‚ä©A$ then $w‚ä©B$.
   - If $A,B‚ààFm$, then $w‚ä©A‚ñ∑B$ iff if $wRu$ and $u‚ä©A$ then there exists $v$ such
     that $v‚ä©B$ and $uS_wv$.
   {{{enddef}}}

   {{{begincoro}}}
   It immediately follows that:
   - If $A,B‚ààFm$, then $w‚ä©A‚àß(‚à®)B$ iff $w‚ä©A$ and (or) $w‚ä©B$.
   - If $A‚ààFm$, then $w‚ä©‚ô¢A$ iff there exists $u$ such that $wRu$ and $u‚ä©A$.
   - If $A‚ààFm$, then $w‚ä©‚ñ°A$ iff for every $u$ such that $wRu$ we have $u‚ä©A$.
   {{{endcoro}}}

** Generalized Veltman semantics
   {{{begindef}}} An ordinary Veltman frame $F=‚ü®W,R,S‚ü©$ is a structure
   constituted by a set of worlds $W$, a binary relation $R‚äÜW¬≤$ and a ternary
   relation $S‚äÜW√óW√ó(ùí´(W)‚àñ\{‚àÖ\})$. We write $wRu$ in place of $‚ü®w,u‚ü©‚ààR$ and
   $uS_wY$ in place of $‚ü®w,u,Y‚ü©‚ààS$. The structure must satisfy the following
   conditions:

   1. $R$ is a transitive.
   2. $R$ is conversely well-founded. That is, there is no infinite ascending
      chain $w‚ÇÅRw‚ÇÇR‚Ä¶$.
   3. If $uS_wY$ then for all $y‚ààY$ we have $wRy$.
   4. If $wRu$ then $uS_w\{u\}$.
   5. If $xS_wY$ and $y‚àâZ$ and $yS_wZ$ then $wS_wZ$.
   6. If $wRu$ and $uRv$ then $uS_w{v}$.
   7. If $V‚äÜZ$ and $Z‚äÜwR\_$ then $uS_wZ$.
   {{{enddef}}}

   {{{begindef}}} An generalized Veltman model $M=‚ü®F,V‚ü©$ is a structure
   constituted by a generalized Veltman frame $F$ and a valuation $V‚äÜW√óVar$.

   Given a model $M$, we define a forcing relation $‚ä©_M‚äÜW √ó Fm$. We use the same
   notation conventions as in the ordinary semantics.
   - $w‚äÆ‚ä•$.
   - If $x‚ààVar$, then $w‚ä©x$ iff $‚ü®w,x‚ü©‚ààV$.
   - If $A,B‚ààFm$, then $w‚ä©A‚ÜíB$ iff if $w‚ä©A$ then $w‚ä©B$.
   - If $A,B‚ààFm$, then $w‚ä©A‚ñ∑B$ iff if $wRu$ and $u‚ä©A$ then there exists $Y$ such
     that $Y‚ä©B$ and $uS_wY$. When we write $Y‚ä©B$ we mean that for all $y‚ààY$ we
     have $y‚ä©B$.
   {{{enddef}}}
* Frafme conditions
  A principle is a schema of formulas that carries some special significance.

  In this section we present a series of principles in conjunction with their
  respective frame conditions for ordinary semantics as well as generalized
  semantics.
** $M$ principle
   The $M$ principle reads as follows:
   \[A ‚ñ∑ B ‚Üí (A ‚àß ‚ñ° C) ‚ñ∑ (B ‚àß ‚ñ° C)\]

*** Ordinary semantics
   The frame condition for $M$ for ordinary semantics, name it $M_{ord}$,
   reads as follows:
   \[‚àÄx,w,z,u(xS_w zRu ‚áí xRu)\]

   #+caption: Ordinary frame condition for $M$
   #+name: fig:ord-M-condition
   #+attr_latex: :float t :width 0.20\textwidth :placement [H]
   [[file:wip.png]]

   {{{begintheorem}}} For any ordinary frame $F$, we have that $F$ satisfies the
   $M_{ord}$ condition iff any model based on $F$ forces every instantiation of the $M$
   principle. In symbols:

   \[F ‚ä® M_{ord} ‚áî F ‚ä© M\] {{{endtheorem}}}

   {{{beginproof}}}
   - \boxed{‚áí} Let $M$ be a model based on $F$ and let $w$ be any world. Assume
     that $w‚ä©A‚ñ∑B$ and that there is a world $x$ such that $wRx$ and $x‚ä©A‚àß‚ñ°C$.
     Our aim is to find a world $z$ such that $xS_wz‚ä©B‚àß‚ñ°C$. Since $wRx‚ä©A$ and
     $w‚ä©A‚ñ∑B$ there is a world $z$ such that $xS_wz‚ä©B$. We now show that $z‚ä©‚ñ°C$.
     Let $u$ be such that $zRu$, by the frame condition it follows that $xRz$
     and we know $x‚ä©‚ñ°C$ hence $u‚ä©C$ and thus $z‚ä©‚ñ°C$. Hence $z$ is the desired
     world.

   - \boxed{‚áê} Let $a,b,c‚ààVar$, assume $F‚ä© a‚ñ∑b‚Üí(a‚àß‚ñ°c)‚ñ∑(b‚àß‚ñ°c)$. Then for some
     $x,w,u$ we have $xS_wzRu$. Our goal is to prove $xRu$. Consider a model
     such that the following holds (for any formula $A$, we define
     $[A]‚âî\{w:w‚ä©A\}$.
     \begin{flalign*}
     [a] &= \{x\} \\
     [b] &= \{z\} \\
     [c] &= \{v:xRv\}
     \end{flalign*}
     We observe that $w‚ä©a‚ñ∑b$ because $a$ is only forced in $x$ and we have
     $xS_wz‚ä©b$. Then it follows that $w‚ä©(a‚àß‚ñ°c)‚ñ∑(b‚àß‚ñ°c)$. It is easy to observe
     that $x‚ä©a‚àß‚ñ°c$, furthermore we have that by definition of ordinary frame
     $xS_wz‚áíwRx$, hence $wRx$ and thus there must exist some $v$ such that
     $xS_wv‚ä©b‚àß‚ñ°c$. Since $b$ is only true in $z$ it must be $z‚ä©b‚àß‚ñ°c$. Then,
     because $zRu$ we have $u‚ä©c$, therefore $xRu$.
   {{{endproof}}}

*** Generalized semantics
   The frame condition for $M$ for generalized semantics, name it $M_{gen}$,
   reads as follows:

   \[ ‚àÄu,w,V(uS_wV‚áí Œ£V'‚äÜV(uS_wV',‚àÄv'‚ààV'‚àÄz(v'Rz‚áíuRz)))\]

   #+caption: Generalized frame condition for $M$
   #+name: fig:gen-M-condition
   #+attr_latex: :float t :width 0.20\textwidth :placement [H]
   [[file:wip.png]]

   {{{begintheorem}}} For any generalized frame $F$, we have that $F$ satisfies the
   $M_{gen}$ condition iff any model based on $F$ forces every instantiation of
   the $M$ principle. In symbols:

   \[F ‚ä® M_{gen} ‚áî F ‚ä© M\] {{{endtheorem}}}

   {{{beginproof}}}
   - \boxed{‚áí} Let $M$ be a model based on $F$ and let $w$ be any world. Assume
     that $w‚ä©A‚ñ∑B$ and that there is a world $x$ such that $wRx$ and $x‚ä©A‚àß‚ñ°C$.
     Our aim is to find a set $Z$ such that $xS_wZ‚ä©B‚àß‚ñ°C$. Since $wRx‚ä©A$ and
     $w‚ä©A‚ñ∑B$ there is set $Z$ such that $xS_wZ‚ä©B$. Then by the $M_{gen}$
     condition it follows that there is a world $Z'‚äÜZ$ such that $xS_wZ'$ and
     $‚àÄv‚ààZ'‚àÄz(vRz‚áíxRz)$. Now we show $Z'‚ä©‚ñ°C$. Let $v‚ààZ'$ and $u$ such that
     $vRu$, by the condition above it follows $xRu$ and since $x‚ä©‚ñ°C$ we have
     $u‚ä©C$. Hence $Z'$ is the desired set.
   - \boxed{‚áê} Let $a,b,c‚ààVar$ and assume $F‚ä©a ‚ñ∑ b ‚Üí (a ‚àß ‚ñ° c) ‚ñ∑ (b ‚àß ‚ñ° c)$ and
     $uS_wV$. Assume for a contradiction that $(‚ãÜ)\ ‚àÄV'‚äÜV(uSwV'‚áí
     ‚àÉv‚ààV'‚àÉz(vRz,u\cancel{R}z))$. Consider a model satisfying the following
     \begin{flalign*}
     [a] &= \{u\} \\
     [b] &= V \\
     [c] &= \{v:uRv\}
     \end{flalign*}
     We see that $w‚ä©a‚ñ∑b$ since $a$ is only true in $u$ and we have $uS_wV‚ä©bS$.
     It follows that ${w‚ä©(a ‚àß ‚ñ° c)‚ñ∑(b‚àß‚ñ°c)}$. It is easy to see that $u‚ä©a‚àß‚ñ°c$,
     hence there must exist $V'$ such that $uS_wV'‚ä©b‚àß‚ñ°c$. Clearly $V'‚äÜV$, hence
     by $(‚ãÜ)$ it follows that there exists $v‚ààV'$ and $z$ such that $vRz$ and
     $u\cancel{R}z$. By the fact that $vRz$ it follows $z‚ä©c$ and by the fact
     that $u\cancel{R}z$ it follows $z‚äÆc$, which is an absurd.
   {{{endproof}}}
   \newpage
** TODO $M‚ÇÄ$ principle
*** Ordinary semantics
*** Generalized semantics
** $P‚ÇÄ$ principle

   The $P‚ÇÄ$ principle reads as follows.
   The $P‚ÇÄ$ principle reads as follows:
   \[A ‚ñ∑ ‚ô¢ B ‚Üí ‚ñ° (A ‚ñ∑ B)\]
*** Ordinary semantics
    The $(P‚ÇÄ)_{ord}$ condition reads as follows:
    \[‚àÄw,x,y,z,u(wRxRyS_wzRu‚áíyS_xu)\]

   {{{begintheorem}}} For any ordinary frame $F$, we have that $F$ satisfies the
   $(P‚ÇÄ)_{ord}$ condition iff any model based on $F$ forces every instantiation of
   the $P‚ÇÄ$ principle. In symbols:

   \[F ‚ä® (P‚ÇÄ)_{ord} ‚áî F ‚ä© P‚ÇÄ\] {{{endtheorem}}}

   {{{beginproof}}}
   - \boxed{‚áí} Let $M$ be a model based on $F$ and let $w$ be any world. Assume
     that $w‚ä©A‚ñ∑‚ô¢B$ and that there is a world $x$ such that $wRx$. Our goal is to
     show that $x‚ä©A‚ñ∑B$. Consider a world $y$ such that $xRy‚ä©A$. As $wRy$ and
     $w‚ä©A‚ñ∑‚ô¢B$ then there exist some worlds $z,u$ such that $yS_wzRu‚ä©B$. By the
     $(P‚ÇÄ)_{ord}$ condition it follows that $yS_xu$ and thus $x‚ä©A‚ñ∑B$.
   - \boxed{‚áê} Let $a,b‚ààVar$ and assume $F‚ä©a ‚ñ∑ ‚ô¢ b ‚Üí ‚ñ° (a ‚ñ∑ b)$ and assume that
     $wRxRyS_wzRu$. We want to show $yS_xu$. Consider a model based on $F$ such
     that:
     \begin{flalign*}
     [a] = \{y \} \\
     [b] = \{u \}
     \end{flalign*}
     Observe that $w‚ä©a‚ñ∑‚ô¢b$ as the only world that forces $a$ is $y$ and we have
     $yS_wz‚ä©‚ô¢b$, because $zRu‚ä©b$. Consequently we have $w‚ä©‚ñ°(a‚ñ∑b)$ and therefore
     $x‚ä©a‚ñ∑b$. Then, since $xRy‚ä©a$ it follows that there exist some $v$ such that
     $yS_xv‚ä©b$, but since $b$ is only forced in $u$, it must be $u=v$ and so
     $yS_xu$.
   {{{endproof}}}

*** Generalized semantics
    The $(P‚Çâ)_{gen}$ condition reads as follows:
    \[‚àÄw,x,y,Y,Z((wRxRyS_wY,‚àÄy‚ààY‚àÉz‚ààZ(yRz))‚áí‚àÉZ'‚äÜZ(yS_xZ'))\]

   {{{begintheorem}}} For any generalized frame $F$, we have that $F$ satisfies the
   $(P‚ÇÄ)_{gen}$ condition iff any model based on $F$ forces every instantiation of
   the $P‚ÇÄ$ principle. In symbols:

   \[F ‚ä® (P‚ÇÄ)_{gen} ‚áî F ‚ä© P‚ÇÄ\] {{{endtheorem}}}

   {{{beginproof}}}
   - \boxed{‚áí} Let $M$ be a model based on $F$ and let $w$ be any world. Assume
     that $w‚ä©A‚ñ∑‚ô¢B$ and that there is a world $x$ such that $wRx$. We aim to show
     that $x‚ä©A‚ñ∑B$. Assume there is a world $u$ such that $xRu‚ä©A$ and as $wRu$
     and $w‚ä©A‚ñ∑‚ô¢B$ then there exists a set $Y$ $uS_xY‚ä©‚ô¢B$. Let $ùîπ=\{w:w‚ä©B\}$.
     Then observe that $‚àÄy‚ààY$ there exists some $z‚ààùîπ$ since $Y‚ä©‚ô¢B$. Hence by the
     $(P‚ÇÄ)_{gen}$ condition there exists some $ùîπ'‚äÜùîπ$ such that $yS_xùîπ'$. Clearly
     $ùîπ'‚ä©B$, therefore $x‚ä©A‚ñ∑B$.
   - \boxed{‚áê} Let $a,b‚ààVar$ and assume $F‚ä©a ‚ñ∑ ‚ô¢ b ‚Üí ‚ñ° (a ‚ñ∑ b)$ and assume
     that for some $w,x,y,Y,Z$ we have $wRxRyS_wY$ and $(‚ãÜ)\ ‚àÄy‚ààY‚àÉz‚ààZ(yRz)$.
     Consider a model based on $F$ such that:
     \begin{flalign*}
    [a] &= \{y\} \\
    [b] &= Z
     \end{flalign*}
     See that $w‚ä©a‚ñ∑‚ô¢b$ as the only world that forces $a$ is $y$ and we have
     $yS_wY$ and by $(‚ãÜ)$ it follows that $Y‚ä©‚ô¢b$. Consequently it holds that
     $w‚ä©‚ñ°(a‚ñ∑b)$ and since $wRx$ then $x‚ä©a‚ñ∑b$. Also, since $xRy‚ä©a$ then there
     exists $Z'$ such that $yS_xZ'‚ä©b$. Clearly $Z'‚ä©b$ implies $Z'‚äÜZ$ so we are
     done.
   {{{endproof}}}

** $R$ principle
   The $R$ principle reads as follows:

   \[A ‚ñ∑ B ‚Üí (¬¨ (A ‚ñ∑ ¬¨C) ‚ñ∑ (B ‚àß ‚ñ° C))\]

*** Ordinary semantics
    The $R_{ord}$ condition reads as follows:
    \[‚àÄw,x,y,z(wRxRyS_wz‚áí‚àÄv(zRv‚áíyS_xv)) \]

   #+caption: Ordinary frame condition for $R$
   #+name: fig:ord-R-condition
   #+attr_latex: :float t :width 0.20\textwidth :placement [H]
   [[file:wip.png]]

   {{{begintheorem}}}
   For any ordinary frame $F$, we have that $F$ satisfies the
   $R_{ord}$ condition iff any model based on $F$ forces every instantiation of
   the $R$ principle. In symbols:

   \[F ‚ä® R_{ord} ‚áî F ‚ä© R\]
   {{{endtheorem}}}
   {{{beginproof}}}
   - \boxed{‚áí} Let $M$ be a model based on $F$ and let $w$ be any world. Assume
     that $w‚ä©A‚ñ∑B$ and that there is a world $x$ such that $wRx‚ä©¬¨(A‚ñ∑¬¨C)$. We need
     to see that there is some world $v$ such that $xS_wv‚ä©B‚àß‚ñ°C$. From
     $x‚ä©¬¨(A‚ñ∑¬¨C)$ we get a world $y$ such that $xRy‚ä©A$ and $(‚ãÜ)\ ‚àÄv(yS_xv‚áív‚ä©C)$.
     Since $w‚ä©A‚ÜíB$ and by transitivity we have $wRy$ it follows that there
     exists a world $z$ such that $yS_wz‚ä©B$. To see that $z$ is the desired
     world it remains to see that $z‚ä©‚ñ°C$. Let $u$ be such that $zRu$, then by
     $R_{ord}$ it follows that $yS_xu$ and by $(‚ãÜ)$ we get $u‚ä©C$.
   - \boxed{‚áê} Let $a,b,c‚ààVar$ and assume that for some $w,x,y,z$ we have
     $wRxRyS_wz$ . Consider a model
     based on $F$ that satisfies the following.
    \begin{flalign*}
     [a] &= \{y\} \\
     [b] &= \{z\} \\
     [c] &= \{u:yS_xu\}
    \end{flalign*}
     By assumption we have that $w‚ä©a ‚ñ∑ b ‚Üí (¬¨ (a ‚ñ∑ ¬¨c) ‚ñ∑ (b ‚àß ‚ñ° c))$. Clearly
     $w‚ä©a‚ñ∑b$ as we have $yS_wz‚ä©b$. Consequently it holds that $w‚ä©¬¨ (a ‚ñ∑ ¬¨c) ‚ñ∑ (b
     ‚àß ‚ñ° c)$. In order to show that $x‚ä©¬¨ (a ‚ñ∑ ¬¨c)$, considering that $a$ is only
     forced in $y$, it suffices to observe that $‚àÄz(yS_xz‚áíz‚ä©c)$, which clearly
     holds. Then there must exist some world $v$ such that $xS_wv‚ä©b‚àß‚ñ°c$ but
     $v=z$ since $z$ is the only world that forces $b$, hence $xS_wz‚ä©‚ñ°c$. Now to
     show $‚àÄv(zRv‚áíyS_xv)$ consider some $v$ such that $zRv$. From $z‚ä©‚ñ°c$ we get
     $v‚ä©c$ and thus $yS_xv$.
   {{{endproof}}}

*** Generalized semantics

    We first introduce the concept of choice set

   {{{begindef}}} If $xRy$ we say that a set of worlds $K$ is a choice set for
   $‚ü®x,y‚ü©$ iff for any $V$ such that $yS_xV$ we have $V‚à©K‚â†‚àÖ$. We denote the
   family of choice sets for $‚ü®x,y‚ü©$ by $ùíû(x,y)$. Note that this definition
   depends on the frame, but it should always be clear by context.
   {{{enddef}}}

    The $R_{gen}$ condition reads as follows:
    \begin{flalign*}
    &‚àÄw,x,y,Y,K(wRxRyS_wY,K‚ààùíû(x,y)   \\
    ‚áí& ‚àÉY'‚äÜY(xS_wY',‚àÄy'‚ààY'‚àÄz(y'Rz‚Üíz‚ààK)))
    \end{flalign*}

   #+caption: Generalized frame condition for $R$
   #+name: fig:gen-R-condition
   #+attr_latex: :float t :width 0.20\textwidth :placement [H]
   [[file:wip.png]]

   {{{begintheorem}}}
   For any generalized frame $F$, we have that $F$ satisfies the
   $R_{gen}$ condition iff any model based on $F$ forces every instantiation of
   the $R$ principle. In symbols:

   \[F ‚ä® R_{gen} ‚áî F ‚ä© R\]
   {{{endtheorem}}}
   {{{beginproof}}}
   - \boxed{‚áí} Let $M$ be a model based on $F$ assume there is a world $w$ such
     that $w‚ä©A‚ñ∑B$ and a world $x$ such that $wRx$ and $x‚ä©¬¨(A‚ñ∑¬¨C)$. We need to
     show that there is a set $Z$ such that $xS_wZ‚ä©B‚àß‚ñ°C$. From $x‚ä©¬¨(A‚ñ∑¬¨C)$ it
     follows that there is a world $y$ such that $xRy‚ä©A$ and $(‚ãÜ)\
     ‚àÄV(yS_xV‚áí‚àÉc‚ààV(c‚ä©C))$. Consider the set $K‚âî\{c:c‚ä©C,‚àÉV(c‚ààV,yS_xV)\}$. Clearly
     by $(‚ãÜ)$ it follows that $K$ is a choice set for $‚ü®x,y‚ü©$. By transitivity
     of $R$ we get $wRy$ and since $w‚ä©A‚ñ∑B$ then there must exist some $Y$ such
     that $yS_wY‚ä©B$. We can now apply the $R_{gen}$ condition and get a $Y'‚äÜY$
     such that $xS_wY'$ and $(‚Ä†)\ ‚àÄy'‚ààY'‚àÄz(y'Rz‚Üíz‚ààK)$. To show that $Y'$ is the
     desired set it remains to see that $Y'‚ä©B‚àß‚ñ°C$. From the fact that $Y'‚äÜY‚ä©B$
     it easily follows that $Y'‚ä©B$. Now, let $y'‚ààY'$ and $u$ such that $y'Ru$,
     from $(‚Ä†)$ we get $u‚ààK$ and by definition of $K$ we have $u‚ä©C$.
   - \boxed{‚áê} Let $a,b,c‚ààVar$ and assume $F‚ä© a ‚ñ∑ b ‚Üí (¬¨ (a ‚ñ∑ ¬¨c) ‚ñ∑ (b ‚àß ‚ñ° c))$.
     Assume also that for some $w,x,y,Y,K$ we have $wRxRyS_wY,K‚ààùíû(x,y)$. Now
     consider a model based on $F$ that satisfies the following:
    \begin{flalign*}
    [a] &=\{y\} \\
    [b] &=Y \\
    [c] &= K \\
    \end{flalign*}
    By assumption we have $w‚ä©a ‚ñ∑ b ‚Üí (¬¨ (a ‚ñ∑ ¬¨c) ‚ñ∑ (b ‚àß ‚ñ° c))$. Observe that
     that $w‚ä©a‚ñ∑b$ since $yS_wY‚ä©b$. Thus $w‚ä©¬¨ (a ‚ñ∑ ¬¨c) ‚ñ∑ (b ‚àß ‚ñ° c)$. Being $y$
     the only world that forces $a$, in order to show $x‚ä©¬¨(a‚ñ∑¬¨c)$ we need to see
     that $‚àÄV(yS_xV‚áí‚àÉz‚ààV(z‚ä©c))$, which is equivalent to $‚àÄV(yS_xV‚áí‚àÉz‚ààV‚à©K)$ and
     this holds since $K‚ààùíû(x,y)$. As a consequence of $x‚ä©¬¨(a‚ñ∑¬¨c)$ we have that
     there exists a $Y'$ such that $xS_wY'‚ä©b‚àß‚ñ°c$. From $Y'‚ä©b$ we get $Y'‚äÜY$ and
     from $Y'‚ä©‚ñ°c$ we get $‚àÄy'‚ààY'(‚àÄz(y'Rz‚Üíz‚ààK))$, hence $Y'$ is the desired set.
   {{{endproof}}}

** $R‚ÇÅ$ principle
  The $R_1$ principle reads as follows:
  \[A ‚ñ∑ B ‚Üí (¬¨(A ‚ñ∑ ¬¨C)‚àß (D‚ñ∑‚ô¢E))‚ñ∑(B‚àß‚ñ°C‚àß(D‚ñ∑E))\]

*** Ordinary semantics

    The $(R‚ÇÅ)_{ord}$ frame condition reads as follows (pull quantifiers out?):
    \[‚àÄw,x,y,z(wRxRyS_wz‚áí‚àÄu(zRu‚áíyS_xu,‚àÄv(uS_xv‚áí‚àÄm(vRm‚áíuS_zm))))\]

    # #+caption: Ordinary frame condition for $R‚ÇÅ$
    # #+name: fig:ord-R‚ÇÅ-condition
    # #+attr_latex: :float t :width 0.20\textwidth :placement [H]
    # [[file:wip.png]]

    {{{begintheorem}}}
    For any ordinary frame $F$, we have that $F$ satisfies the
    $(R‚ÇÅ)_{ord}$ condition iff any model based on $F$ forces every instantiation of
    the $R‚ÇÅ$ principle. In symbols:

    \[F ‚ä® (R‚ÇÅ)_{ord} ‚áî F ‚ä© R‚ÇÅ\]
    {{{endtheorem}}}

    {{{beginproof}}}
    - \boxed{‚áê} Let $a,b,c,d,e‚ààVar$ and assume $F‚ä© a ‚ñ∑ b ‚Üí ((¬¨ (a ‚ñ∑ ¬¨c) ‚àß(d‚ñ∑‚ô¢e))
      ‚ñ∑ (b ‚àß ‚ñ° c ‚àß (d‚ñ∑e)))$. Consider some worlds $w,x,y,z,u,v,m$ and assume for
      a contradiction that $wRxRyS_wzRu,yS_xu‚áí(uS_xv,vRm,u\cancel{S}_zm)$. Now
      consider a model based on $F$ that satisfies the following:
      \begin{flalign*}
      [a] &= \{y\} \\
      [b] &= \{z\} \\
      [c] &= \{w:yS_xw\} \\
      [d] &= \{?\} \\
      [e] &= \{?\} \\
      \end{flalign*}
      First observe that $w‚ä©a‚ñ∑b$ since $a$ is only forced in $y$ and we have
      $yS_wz‚ä©b$. Therefore $w‚ä©¬¨ (a ‚ñ∑ ¬¨c) ‚àß(d‚ñ∑‚ô¢e) ‚ñ∑ (b ‚àß ‚ñ° c ‚àß (d‚ñ∑e))$. Now we
      show that $x‚ä©¬¨ (a ‚ñ∑ ¬¨c)$. Since $a$ is only forced in $y$ and $xRy$, we
      need to show that $‚àÄu(yS_xu‚áíu‚ä©c)$, which clearly holds. We proceed by
      showing $x‚ä©d‚ñ∑‚ô¢e$.
    - \boxed{‚áí} Let $M$ be a model based on $F$ assume there is a world $w$ such
      that $w‚ä©A‚ñ∑B$ and a world $x$ such that $wRx$ and $x‚ä©¬¨(A‚ñ∑¬¨C)‚àß(D‚ñ∑‚ô¢E)$. Then
      there exists world $y$ such that $xRy‚ä©A$ and $(‚ãÜ)\ ‚àÄv(yS_xv‚áív‚ä©C)$. As
      $wRy‚ä©A$ and $w‚ä©A‚ñ∑B$ there exists a world $z$ such that $yS_wz‚ä©B$. It
      remains to show that $z‚ä©‚ñ°C‚àß(D‚ñ∑E)$. We first see that $z‚ä©‚ñ°C$. Consider
      $v$ such that $zRv$, by $(R‚ÇÅ)_{ord}$ it follows that $yS_xv$ and by $(‚ãÜ)$
      we get $v‚ä©C$. Now we show $z‚ä©D‚ñ∑E$. Let $u$ be such that $zRu‚ä©D$, we need
      to find some $m$ such that $uS_zm‚ä©E$. By $(R‚ÇÅ)_{ord}$ we get $yS_xu$ and
      $(‚Ä†)\ ‚àÄv,m((uS_xv,vRm)‚áíuS_zm)$. See that $yS_xu$ implies $xRu$ and since
      $x‚ä©D‚ñ∑‚ô¢E$ and $u‚ä©D$ we get that there is some $n$ such that $uS_xn‚ä©‚ô¢E$.
      Hence there is a world $m$ such that $nRm‚ä©E$. Finally by $(‚Ä†)$ and $uS_xn$
      and $nRm$ we get $uS_zm$ and thus we have the desired $m$ and we conclude
      $z‚ä©D‚ñ∑E$.

    {{{endproof}}}

*** Generalized semantics
    Some definitions:
    1. $R^{-1}[E] ‚âî \{x : ‚àÉy‚ààE. xRy\}$. $E$ denotes a set.
    2. $R‚Çì^{-1}[E]‚âîR^{-1}[E]‚à©R[x]$. $E$ denotes a set.


    The $(R_1)_{gen}$ condition reads as follows:
    \begin{flalign*}
    &‚àÄw,x,u,V,K,ùîº(wRxRuS_wV, K‚ààùíû(x,u) \\
    ‚áí\ & (‚àÉV'‚äÜV)(xS_wV',R[V']‚äÜK,(‚àÄv‚ààV')(‚àÄc‚ààK)(vRcS‚ÇìR‚Çì^{-1}[ùîº]‚áí(‚àÉùîº'‚äÜùîº)cS_vùîº')))
    \end{flalign*}

    {{{begintheorem}}}
    For any generalized frame $F$, we have that $F$ satisfies the
    $(R‚ÇÅ)_{gen}$ condition iff any model based on $F$ forces every instantiation of
    the $R‚ÇÅ$ principle. In symbols:

    \[F‚ä®(R‚ÇÅ)_{gen}‚áîF‚ä©R‚ÇÅ\]
    {{{endtheorem}}}

    {{{beginproof}}}
    {{{red(proved in Agda)}}}
    - \boxed{‚áí} Let's fix the model and let $w ‚àà W$ be arbitrary. Suppose $w‚ä© A
      ‚ñ∑B$, and let $x$ be such that $wRx$ and $x‚ä© ¬¨(A ‚ñ∑ ¬¨C) ‚àß (D ‚ñ∑ ‚ô¢E)$. It
      follows from $x ‚ä©¬¨(A ‚ñ∑¬¨C)$ that there exists $u$ such that $xRu$, such
      that $u‚ä©A$, and for every $Z$ such that $uS_x Z$ there is some $c_Z ‚àà Z$
      such that $c_Z ‚ä©C$. From $wRu$, $w‚ä© A‚ñ∑ B$ and $u‚ä© A$ follows in particular
      that there is a $V$, $uS_w V ‚ä©B$. Let $K ‚âî \{c_Z: uS_x Z\}$. It is easy to
      check that $K ‚àà ùíû(x, u)$. Let $ùîº ‚âî [‚ä©E]$ (set of worlds that force $E$).
      For the selected $w, x, u, V, K, ùîº$ the property $(R 1)_{gen}$ implies
      that there exists $V' ‚äÜ V$ such that:

      \[xS_wV',R[V']‚äÜK ,(‚àÄv‚ààV')(‚àÄc‚ààK)(vRcS_xR_x^{-1}[ùîº]‚áí(‚àÉùîº'‚äÜùîº)cS_vùîº')\]

      We have that $V' ‚ä©B$ since $V'‚äÜV$ and $V'‚ä©‚ñ° C$ since $R[V']‚äÜK$. We now show
      that $V'‚ä© D‚ñ∑ E$. Assume that for some $c ‚àà R [V']$ we have $c‚ä© D$. From
      earlier we have $x‚ä© D ‚ñ∑ ‚ô¢E$. Since $c ‚àà R [V '] ‚äÜ C ‚äÜ R [x]$, then $xRc$ so
      it follows that there exists $U$ such that $cS_x U$ and $U‚ä©‚ô¢E$. Clearly
      $U‚äÜ[‚ô¢E]_x$ and also $[‚ô¢E]_x‚äÜR[x]$, hence by monotonicity we have
      $cS_x[‚ô¢E]_x$ which is the same as $cS_x R_x^{‚àí1}[ùîº]$ so by the above
      property there exists $ùîº'‚äÜùîº$ such that $cS_v ùîº'$. Because $ùîº'‚äÜùîº$ we have
      $ùîº'‚ä©E$.
    - \boxed{‚áê} Assume for a contradiction that $F‚ä≠(R‚ÇÅ)_{gen}$. It follows that
      there exist $w,x,u,V,K,ùîº$ such that $wRxRuS_wV$, $K‚ààùíû(x,u)$ and:
      \[(‚àÄV'‚äÜV)(xS_wV', R[V']‚äÜK‚áí (‚àÉv‚ààV')(‚àÉc‚ààK)(vRcS_xR_x^{-1}[ùîºùîº], (‚àÄùîº'‚äÜùîº)
      c\cancel{S}_v ùîº'))\]

      Let $ùí±$ be a family of sets defined thus:
      \[ùí±‚âî \{U : U‚äÜV, xS_wU,R[U]‚äÜK\}\]

      From the condition it follows that for every $U‚ààùí±$ the following is valid:
      \[(‚àÉv_U‚ààU)(‚àÉc_U‚ààK)(v_URc_US_xR_x^{-1}[ùîº],(‚àÄùîº'‚äÜùîº) c_U\cancel{S}_{v_U} ùîº')\]

      Let us fix such $v_U$ and $c_U$ for all $U‚ààùí±$.

      Define a valuation such that the following applies:
      \begin{flalign*}
      [‚ä©a] & \{u\} \\
      [‚ä©b] &= V \\
      [‚ä©c] &= K \\
      [‚ä©d] &= \{c_U:U‚ààùí±\} \\
      [‚ä©e] &= ùîº
      \end{flalign*}

      By assumption we have $w ‚ä© a ‚ñ∑ b ‚Üí (¬¨(a‚ñ∑¬¨c)‚àß(d‚ñ∑‚ô¢e))‚ñ∑(b‚àß‚ñ°c‚àß(d‚ñ∑e))$.

      It is easy to see that $w ‚ä© a ‚ñ∑ b$ and $x ‚ä© ¬¨(a ‚ñ∑ ¬¨c)$.

      Let us prove $x ‚ä© d‚ñ∑‚ô¢e$. Let $xRc‚ä© D$. Then $c = c_U$ for some $U ‚àà ùí±$. From
      the definition of $c_U$ we have $c_U S_x R_x^{‚àí1} [ùîº]$, a forcing is defined
      such that $e$ is true exactly on the set $ùîº$. Hence $R_x^{-1}[ùîº]‚ä©‚ô¢e$ and thus
      $x ‚ä© d‚ñ∑‚ô¢e$.

      We can also check that for $U ‚àà ùí±$ we have $U‚ä© b ‚àß ‚ñ°c$ and the following
      following condition holds for any set $U$:
      \begin{flalign*}
        (‚ãÜ)\ xS_wU ,U‚ä© b ‚àß ‚ñ°c‚áíU‚àà ùí±
      \end{flalign*}
      Then since $w‚ä©a‚ñ∑b$ and $wRx‚ä©(a‚óÅc)‚àß(d‚ñ∑‚ô¢e)$ there must exist some set $U$
      such that $xS_wU‚ä©b‚àß‚ñ°c‚àß(d‚ñ∑e)$. From $(‚ãÜ)$ follows that that $U‚ààùí±$ hence
      there exist $v_U,c_U$ such that $v_URc_US_xR_x^{-1}[ùîº],(‚àÄùîº'‚äÜùîº)
      c_U\cancel{S}_{v_U} ùîº'$. Since $c_U‚ä©d$ there must exist some $Z$ such that
      $c_US_{v_U}Z‚ä©e$, however, by the definition of the valuation it follows
      that $Z‚äÜùîº$ and thus $c_U\cancel{S}_{v_U} Z$, which is a contradiction.

    {{{endproof}}}

# \newpage
** $R¬π$ principle

   The $R¬π$ principle reads as follows:
   \[A ‚ñ∑ B ‚Üí (‚ô¢¬¨(D ‚ñ∑ ¬¨C)‚àß (D‚ñ∑A))‚ñ∑(B‚àß‚ñ°C)\]

   The $(R¬π)_{gen}$ condition reads as follows:
   \begin{flalign*}
   &‚àÄw,x,y,z,ùî∏,ùîπ,‚ÑÇ,ùîª. \\
   &wRxRyRz, \\
   & (‚àÄu.Rwu,u‚ààùî∏‚áí‚àÉV.SwuV,V‚äÜùîπ), & \text{ensures } w‚ä©A‚ñ∑B \\
   & (‚àÄu.Rxu,u‚ààùîª‚áí‚àÉV.SxuV,V‚äÜùî∏), & \text{ensures } x‚ä©D‚ñ∑A \\
   & (‚àÄV.SyzV‚áí‚àÉv.v‚ààV,v‚àà‚ÑÇ),       &  \text{ensures } y‚ä©¬¨(D‚ñ∑¬¨C) \\
   & z‚ààùîª \\
   ‚áí\ & ‚àÉV‚äÜùîπ.xS_wV,R[V]‚äÜ‚ÑÇ
   \end{flalign*}

   \begin{theorem}
   $$ùîâ‚ä®R¬π‚áîùîâ‚ä®(R¬π)_{gen}$$
   \end{theorem}

   /proof/.
   {{{red(proved in Agda)}}}
   - \boxed{‚áí} Fix a frame $F$ and let $a,b,c,d$ be propositional variables and
     assume $F‚ä©a ‚ñ∑ b ‚Üí (‚ô¢¬¨(d ‚ñ∑ ¬¨c)‚àß (d‚ñ∑a))‚ñ∑(b‚àß‚ñ°c)$. Assume that the left part of
     the implication of $(R¬π)_{gen}$ holds. Now let $V$ be a valuation defined by
     \begin{flalign*}
      V(u)‚ä©a &‚áî u‚ààùî∏ \\
      V(u)‚ä©b &‚áî u‚ààùîπ \\
      V(u)‚ä©c &‚áî u‚àà‚ÑÇ \\
      V(u)‚ä©d &‚áî u‚ààùîª
     \end{flalign*}
     Now one can easily check that $w‚ä©A‚ñ∑B$, $x‚ä©‚ô¢¬¨(D‚ñ∑¬¨C)‚àß(D‚ñ∑A)$, hence there exists $U$
     such that $xS_wU$ and $U‚ä©B‚àß‚ñ°C$. From that we derive that $U‚äÜùîπ$ and $R[U]‚äÜ‚ÑÇ$.
   - \boxed{‚áê} Fix a model $M$ and a world $w$, we are to prove that $w‚ä©A ‚ñ∑ B ‚Üí
     (‚ô¢¬¨(D ‚ñ∑ ¬¨C)‚àß (D‚ñ∑A))‚ñ∑(B‚àß‚ñ°C)$. For that assume that $w‚ä©A‚ñ∑B$ and that for some
     $x,y,z$ we have $wRxRyRz$ and $x‚ä©D‚ñ∑A$, $y‚ä©¬¨(D‚ñ∑¬¨C)$, $z‚ä©D$. Now let
     $ùî∏‚âî\{w:w‚ä©A\}$. We define $ùîπ,‚ÑÇ,ùîª$ likewise for formulas $B,C,D$ respectively.
     It is routine to check that the left part of the implication of $(R¬π)_{gen}$
     is met. Hence there exist a set $V‚äÜùîπ$ such that $xS_wV$ and $R[V]‚äÜ‚ÑÇ$. By the
     definition of the sets $ùîπ$ and $‚ÑÇ$ it follows that $V‚ä©B‚àß‚ñ°C$.

** Other principles
   Additionally, I have proved in Agda the frame condition for the following
   principles:
   - Ordinary semantics: $M$.
   - Generalized semantics: $M,R,P‚ÇÄ$.
